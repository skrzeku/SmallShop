
<!--  Dynamic Component by Factory Resolver (no need right now)
<ng-template #templateTime></ng-template> -->


<app-share-details>
  <div logo class="logo"><img style="max-width: 100%" src="{{product.path_image}}"></div>

  <div detail>

    <h3>{{product.name | uppercase}}</h3>
    <div class="text-right">
    <p appMydirective>Current Price: {{product.price | currency: 'EUR':true}}</p>
    <p>Condition: {{product.condition}}</p>
      <p>Delivery Cost: {{product.delivery_cost | currency: 'EUR':true}}</p>
      <p>Category: {{product.category}}</p>
      <p>Color: {{product.color}}</p>
      <p *ngIf="product.damaged">Damaged: {{product.damaged}}</p>
      <p>Left Time: {{Left_time}}</p>
      <p>Start Date: {{product.start_date | date: 'fullDate'}}</p>
      <p>Finish Date: {{product.finish_date | date: 'fullDate' }}</p>
      
      <div class="description logo"></div>

      <button class="btn btn-primary btnmargin" (click)="BuildMyForm()" #MyRefEdit>Edit</button>
      <button type="button" (click)="DeleteProduct()" class="btn btn-danger btnmargin" #MyRefDel>Delete</button>
    </div>
    <div class="col-sm-4 offset-sm-4"> <div class="form_addnewproduct mrbottom" *ngIf="myformgroup">
      <form [formGroup]="myformgroup">
        <label>Product name:</label>
        <input formControlName="name" type="text" placeholder="name" class="form-control" [ngClass]="{'error_l' : !myformgroup.get('name').valid && myformgroup.get('name').dirty}">

        <!-- dirty mean w8 for first touch like write first characters-->
        <p *ngIf="!myformgroup.get('name').valid && myformgroup.get('name').dirty" class="error_p" id="p1">This field is requaired and must constains 4-12 characters </p>

        <label>Category:</label>
        <input formControlName="category" type="text" placeholder="category" class="form-control">
        <p *ngIf="!myformgroup.get('category').valid && myformgroup.get('category').dirty" class="error_p">This field is requaired.</p>

        <label>Price: </label>
        <input formControlName="price" type="number" placeholder="price" class="form-control">
        <p *ngIf="!myformgroup.get('price').valid && myformgroup.get('price').dirty" class="error_p">This field is requaired and value should be between 0-99999</p>

        <label>Color:</label>
        <input formControlName="color" type="text" placeholder="Color" class="form-control">
        <p *ngIf="!myformgroup.get('color').valid && myformgroup.get('color').dirty" class="error_p">This field is requaired.</p>

        <label>Condition:</label>
        <input formControlName="condition" type="text" placeholder="Condition" class="form-control">
        <p *ngIf="!myformgroup.get('condition').valid && myformgroup.get('condition').dirty" class="error_p">This field is requaired.</p>

        <label>Is damaged?:</label>
        <input formControlName="damaged" type="text" placeholder="true or false" class="form-control">
        <p *ngIf="!myformgroup.get('damaged').valid && myformgroup.get('damaged').dirty" class="error_p">This field is requaired.</p>

        <label>Delivery cost:</label>
        <input formControlName="delivery_cost" type="number" placeholder="cost" class="form-control">
        <p *ngIf="!myformgroup.get('delivery_cost').valid && myformgroup.get('delivery_cost').dirty" class="error_p">Cost can't be less than 0</p>
      </form>
      <button [disabled]="myformgroup.invalid" type="submit" class="btn btn-primary float-right btnmargin" (click)="EditProduct()">Update data</button>
      <button [disabled]="!visible"  type="button" (click)="myformgroup.reset()" class="btn btn-group float-right btnmargin">Clean</button>



    </div></div>

  </div>
  <div buttons>
    <!-- ngbTooltip: need to import NgbModule.forRoot() -->
    <button type="submit" (click)="ShowPrevProduct(product);">Previous Product</button>
    <button placement="bottom" (click)="ShowNextProduct(product); ">Next Product</button>
  </div>

<p footer>{{footerString}}</p>
</app-share-details>
